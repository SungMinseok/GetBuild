# PyInstaller ë¹Œë“œ ì˜¤ë¥˜ ìˆ˜ì • ë‚´ì—­

## ğŸ› ë°œìƒí•œ ì˜¤ë¥˜

### ì¦ìƒ 1: Windows ë²„ì „ ë²”ìœ„ ì´ˆê³¼
```
struct.error: argument out of range
```

PyInstaller ì‹¤í–‰ ì¤‘ Windows ë²„ì „ ì •ë³´ë¥¼ ì‘ì„±í•  ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤.

### ì›ì¸
Windows ë²„ì „ ì •ë³´ì˜ ê° ë¶€ë¶„ì€ **0-65535 ë²”ìœ„**ì—¬ì•¼ í•˜ëŠ”ë°, ê¸°ì¡´ ì½”ë“œì—ì„œ `yymmdd` í˜•ì‹(ì˜ˆ: 251027)ì„ ì‚¬ìš©í•˜ì—¬ 65535ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.

```python
# ë¬¸ì œê°€ ìˆë˜ ì½”ë“œ
yymmdd = f"{yy}{mm}{dd}"  # 251027 â†’ 65535 ì´ˆê³¼!
file_version_parts = [major, minor, yymmdd, hhmm]
```

### ì¦ìƒ 2: ë¶ˆí•„ìš”í•œ build í´ë” ìƒì„±
PyInstallerê°€ ë¹Œë“œ ì¤‘ê°„ ì‚°ë¬¼ì„ `build/` í´ë”ì— ìƒì„±í•˜ì—¬ ê³µê°„ì„ ì°¨ì§€í•˜ê³  ì •ë¦¬ê°€ ë²ˆê±°ë¡œì› ìŠµë‹ˆë‹¤.

## âœ… ìˆ˜ì • ë‚´ìš©

### 1. Windows ë²„ì „ í˜•ì‹ ë³€ê²½ (build_release.py)

**ë¬¸ì œ í•´ê²°**: `yymmdd` â†’ `mmdd` í˜•ì‹ìœ¼ë¡œ ë³€ê²½

#### ë³€ê²½ ì „
```python
# Windows ë²„ì „ í˜•ì‹: 3,0,yymmdd,hhmm
yymmdd = f"{yy}{mm}{dd}"  # 6ìë¦¬ (ì˜ˆ: 251027)
file_version_parts = [major, minor, yymmdd, hhmm]
```

#### ë³€ê²½ í›„
```python
# Windows ë²„ì „ í˜•ì‹: 3,0,mmdd,hhmm (ê° ë¶€ë¶„ì€ 0-65535 ë²”ìœ„)
mmdd = f"{mm}{dd}"  # 4ìë¦¬ (ì˜ˆ: 1027)
file_version_parts = [major, minor, mmdd, hhmm]
```

**ì˜ˆì‹œ**:
- í‘œì‹œìš© ë²„ì „: `3.0-25.10.27.1430`
- Windows íŒŒì¼ ë²„ì „: `3,0,1027,1430`
  - Major: `3`
  - Minor: `0`
  - Build: `1027` (mmdd) âœ… 65535 ì´í•˜
  - Revision: `1430` (hhmm)

### 2. build í´ë” ìë™ ì •ë¦¬

**ë¬¸ì œ í•´ê²°**: onefile ëª¨ë“œ ì‚¬ìš© + ë¹Œë“œ í›„ ìë™ ì •ë¦¬

#### PyInstaller ì‹¤í–‰ ì˜µì…˜ ëª…ì‹œ
```python
# build_release.py - run_pyinstaller()
result = subprocess.run(
    [
        'pyinstaller',
        '--clean',           # ìºì‹œ ì •ë¦¬
        '--noconfirm',       # ìë™ í™•ì¸
        '--distpath', 'dist',  # ì¶œë ¥ ë””ë ‰í† ë¦¬
        '--workpath', 'build', # ì‘ì—… ë””ë ‰í† ë¦¬
        'QuickBuild_release.spec'
    ],
    check=True,
    capture_output=True,
    text=True
)
```

#### ë¹Œë“œ í›„ ìë™ ì •ë¦¬
```python
# build_release.py - cleanup()
dirs_to_remove = [
    'build'  # PyInstaller ì‘ì—… ë””ë ‰í† ë¦¬ (ì„ì‹œ íŒŒì¼)
]

for dir_name in dirs_to_remove:
    try:
        if Path(dir_name).exists():
            shutil.rmtree(dir_name)
            print(f"  âœ“ {dir_name}/ í´ë” ì‚­ì œ")
    except Exception as e:
        print(f"  âš  {dir_name}/ ì‚­ì œ ì‹¤íŒ¨: {e}")
```

**ê²°ê³¼**:
- âœ… ë¹Œë“œ ì™„ë£Œ í›„ `build/` í´ë” ìë™ ì‚­ì œ
- âœ… `dist/` í´ë”ì—ë§Œ ìµœì¢… ê²°ê³¼ë¬¼ ìœ ì§€
- âœ… ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½

### 3. version.txt ì œê±°, version.jsonë§Œ ì‚¬ìš©

#### update_version.py ìˆ˜ì •
```python
# ë³€ê²½ ì „: version.txtì™€ version.json ëª¨ë‘ ìƒì„±
with open('version.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)
with open('version.txt', 'w', encoding='utf-8') as f:
    f.write(new_version)

# ë³€ê²½ í›„: version.jsonë§Œ ìƒì„±
with open('version.json', 'w', encoding='utf-8') as f:
    json.dump(data, f, ensure_ascii=False, indent=2)
```

#### index_v2.py ìˆ˜ì •
```python
def read_version(self) -> str:
    """ë²„ì „ ì½ê¸° (version.jsonì—ì„œ)"""
    try:
        import json
        with open("version.json", "r", encoding="utf-8") as f:
            version_data = json.load(f)
        return version_data.get('version', '3.0-25.10.26.1805')
    except FileNotFoundError:
        # version.jsonì´ ì—†ìœ¼ë©´ version.txt ì‹œë„ (í•˜ìœ„ í˜¸í™˜ì„±)
        try:
            with open("version.txt", "r", encoding="utf-8") as f:
                return f.read().strip()
        except:
            return "3.0-25.10.26.1805"
    except:
        return "3.0-25.10.26.1805"
```

#### index.py ìˆ˜ì •
ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ `read_version_from_file()` ë©”ì„œë“œ ìˆ˜ì •

### 3. .gitignore ì—…ë°ì´íŠ¸
```
# ì„ì‹œ íŒŒì¼
version_info.txt
version.txt  â† ì¶”ê°€
QuickBuild_release.spec
```

## ğŸ“¦ ZIP íŒ¨í‚¤ì§€ ë‚´ìš©

ë³€ê²½ í›„ ZIP íŒŒì¼ì—ëŠ” `version.json`ë§Œ í¬í•¨ë©ë‹ˆë‹¤:

```
QuickBuild_3.0-25.10.27.1430.zip
â”œâ”€â”€ QuickBuild.exe
â”œâ”€â”€ version.json  â† JSON í˜•ì‹, ë” ë§ì€ ì •ë³´ í¬í•¨
â””â”€â”€ Readme.md (ì„ íƒ)
```

`version.json` êµ¬ì¡°:
```json
{
  "version": "3.0-25.10.27.1430",
  "build_date": "2025-10-27",
  "update_url": "https://api.github.com/repos/SungMinseok/GetBuild/releases/latest",
  "changelog": [
    {
      "version": "3.0-25.10.27.1430",
      "date": "2025-10-27",
      "changes": ["ë³€ê²½ì‚¬í•­ 1", "ë³€ê²½ì‚¬í•­ 2"]
    }
  ]
}
```

## ğŸ¯ ì¥ì 

### version.json ì‚¬ìš©ì˜ ì´ì 
1. âœ… **ë” ë§ì€ ì •ë³´**: ë²„ì „, ë‚ ì§œ, changelog, ì—…ë°ì´íŠ¸ URL ëª¨ë‘ í¬í•¨
2. âœ… **êµ¬ì¡°í™”ëœ ë°ì´í„°**: JSON í˜•ì‹ìœ¼ë¡œ íŒŒì‹± ìš©ì´
3. âœ… **ìë™ ì—…ë°ì´íŠ¸ ì§€ì›**: ì•± ë‚´ ì—…ë°ì´íŠ¸ ì²´í¬ ê¸°ëŠ¥ì— í™œìš©
4. âœ… **changelog ê´€ë¦¬**: ë²„ì „ë³„ ë³€ê²½ì‚¬í•­ ì¶”ì 

### Windows ë²„ì „ í˜•ì‹ ê°œì„ 
1. âœ… **ì˜¤ë¥˜ í•´ê²°**: 65535 ë²”ìœ„ ì´ˆê³¼ ë¬¸ì œ í•´ê²°
2. âœ… **ë¹Œë“œ ì„±ê³µ**: PyInstaller ì •ìƒ ì‹¤í–‰
3. âœ… **ì •ë³´ ìœ ì§€**: ì›”/ì¼ ì •ë³´ëŠ” ì—¬ì „íˆ í¬í•¨ (ì—°ë„ ì œì™¸)

## ğŸ” í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ë²„ì „ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸
```bash
python update_version.py "ë¹Œë“œ ì˜¤ë¥˜ ìˆ˜ì •"
```

**í™•ì¸ì‚¬í•­**:
- âœ… `version.json` ìƒì„±ë¨
- âœ… `version.txt` ìƒì„±ë˜ì§€ ì•ŠìŒ
- âœ… ë²„ì „ í˜•ì‹: `3.0-25.10.27.1430`

### 2. ë¹Œë“œ í…ŒìŠ¤íŠ¸
```bash
python build_release.py
```

**í™•ì¸ì‚¬í•­**:
- âœ… Windows íŒŒì¼ ë²„ì „ ì¶œë ¥: `3,0,1027,1430`
- âœ… PyInstaller ì˜¤ë¥˜ ì—†ì´ ì™„ë£Œ
- âœ… `dist/QuickBuild_<ë²„ì „>.zip` ìƒì„±ë¨

### 3. ZIP ë‚´ìš© í™•ì¸
```bash
# ZIP ì••ì¶• í•´ì œ í›„
dir dist\extracted\
```

**í™•ì¸ì‚¬í•­**:
- âœ… `QuickBuild.exe` ì¡´ì¬
- âœ… `version.json` ì¡´ì¬
- âŒ `version.txt` ì—†ìŒ (ì •ìƒ)

### 4. ì•± ì‹¤í–‰ í…ŒìŠ¤íŠ¸
```bash
# EXE ì‹¤í–‰ í›„
# ë©”ë‰´ â†’ About í™•ì¸
```

**í™•ì¸ì‚¬í•­**:
- âœ… ë²„ì „ ë²ˆí˜¸ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œ
- âœ… ê¸°ëŠ¥ ì •ìƒ ì‘ë™

## ğŸ“‹ ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

1. **build_release.py**
   - Windows ë²„ì „ í˜•ì‹ ë³€ê²½ (yymmdd â†’ mmdd)
   - ë””ë²„ê·¸ ì¶œë ¥ ì¶”ê°€

2. **update_version.py**
   - version.txt ìƒì„± ì œê±°
   - version.jsonë§Œ ìƒì„±

3. **index_v2.py**
   - `read_version()` ë©”ì„œë“œ ìˆ˜ì •
   - version.json ìš°ì„  ì½ê¸°

4. **index.py**
   - `read_version_from_file()` ë©”ì„œë“œ ìˆ˜ì •
   - version.json ìš°ì„  ì½ê¸°

5. **.gitignore**
   - version.txt ì¶”ê°€

## ğŸ”„ í•˜ìœ„ í˜¸í™˜ì„±

ë‘ íŒŒì¼ ëª¨ë‘ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤:

```python
try:
    # version.json ì‹œë„
    with open("version.json", "r", encoding="utf-8") as f:
        version_data = json.load(f)
    return version_data.get('version', '3.0-25.10.26.1805')
except FileNotFoundError:
    # ì—†ìœ¼ë©´ version.txt ì‹œë„
    try:
        with open("version.txt", "r", encoding="utf-8") as f:
            return f.read().strip()
    except:
        return "3.0-25.10.26.1805"
```

ì´ë ‡ê²Œ í•˜ë©´:
- âœ… ìƒˆ ë²„ì „: version.json ì‚¬ìš©
- âœ… êµ¬ ë²„ì „: version.txt ì‚¬ìš© ê°€ëŠ¥
- âœ… ë‘˜ ë‹¤ ì—†ìœ¼ë©´: ê¸°ë³¸ ë²„ì „ ë°˜í™˜

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ê¸°ì¡´ version.txt íŒŒì¼ ì²˜ë¦¬

ë¡œì»¬ì— `version.txt` íŒŒì¼ì´ ë‚¨ì•„ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
# ì‚­ì œí•´ë„ ë¬´ë°© (ìë™ ì¬ìƒì„± ì•ˆ ë¨)
del version.txt

# ë˜ëŠ” Gitì—ì„œë§Œ ì œê±°
git rm --cached version.txt
git commit -m "Remove version.txt from Git tracking"
git push
```

### Windows ë²„ì „ ì œí•œì‚¬í•­

- ê° ë¶€ë¶„ì€ 0-65535 ë²”ìœ„ì—¬ì•¼ í•¨
- `mmdd` í˜•ì‹ìœ¼ë¡œ ì—°ë„ ì •ë³´ëŠ” ë²„ì „ ë¬¸ìì—´ì—ë§Œ í¬í•¨
- íŒŒì¼ ì†ì„±ì—ì„œ ë³´ì´ëŠ” ë²„ì „ì€ ê°„ì†Œí™”ë¨

## âœ… ìµœì¢… ê²°ê³¼

### ë¹Œë“œ ì „
```
âŒ struct.error: argument out of range
âŒ ë¹Œë“œ ì‹¤íŒ¨
âŒ build/ í´ë” ìˆ˜ë™ ì •ë¦¬ í•„ìš”
```

### ë¹Œë“œ í›„
```
âœ… Windows íŒŒì¼ ë²„ì „: 3,0,1027,1635
âœ… PyInstaller ë¹Œë“œ ì™„ë£Œ (onefile ëª¨ë“œ)
âœ… dist/QuickBuild_3.0-25.10.27.1635.zip ìƒì„±
âœ… build/ í´ë” ìë™ ì •ë¦¬ ì™„ë£Œ
```

### ìµœì¢… íŒŒì¼ êµ¬ì¡°
```
í”„ë¡œì íŠ¸/
â”œâ”€â”€ dist/
â”‚   â””â”€â”€ QuickBuild_3.0-25.10.27.1635.zip  â† ìµœì¢… ë°°í¬ íŒŒì¼
â”œâ”€â”€ version.json                           â† ë²„ì „ ì •ë³´
â””â”€â”€ (build/ í´ë” ì—†ìŒ - ìë™ ì •ë¦¬ë¨)
```

### ê°œì„  ì‚¬í•­ ìš”ì•½

| í•­ëª© | ë³€ê²½ ì „ | ë³€ê²½ í›„ |
|------|---------|---------|
| Windows ë²„ì „ | `3,0,251027,1635` âŒ | `3,0,1027,1635` âœ… |
| build í´ë” | ìˆ˜ë™ ì •ë¦¬ í•„ìš” | ìë™ ì •ë¦¬ |
| ë²„ì „ íŒŒì¼ | version.txt + version.json | version.jsonë§Œ |
| ë¹Œë“œ ëª¨ë“œ | onefile (ê¸°ì¡´) | onefile (ëª…ì‹œì ) |
| ì¶œë ¥ ê²½ë¡œ | ì•”ë¬µì  | ëª…ì‹œì  (`--distpath`, `--workpath`) |

---

**ìˆ˜ì •ì¼**: 2025-10-27  
**ë²„ì „**: 2.0  
**ìƒíƒœ**: âœ… ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸ ì™„ë£Œ

